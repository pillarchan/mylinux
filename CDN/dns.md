# 概念

```
域名系统（DNS，Domain Name System）是互联网的一项核心服务，它作为可以将域名和IP地址相互映射的一个分布式数据库，能够使人更方便地访问互联网。DNS使用TCP和UDP端口53。当前，对于每一级域名长度的限制是63个字符，域名总长度则不能超过253个字符。 开始时，域名的字符仅限于ASCII字符的一个子集。

简单来说，DNS就像互联网的“电话簿”，它将容易记忆的域名（例如 baidu.com）转换为计算机可以理解的IP地址（例如 182.250.111.14）。当您在浏览器中输入域名时，DNS会将您的请求路由到正确的服务器，以便您能够访问所需的信息或服务。
```

# 组成

[三级域名.]子域名.二级域名.顶级域名.

## 根域 

```
根域是互联网域名层次结构中的最高级别，位于所有其他域名之上。它就像一棵树的树根，为所有其他域名提供支持。根域由一个点表示，通常不显示在域名中，但它始终存在。
根域由互联网名称与数字分配机构 (ICANN) 管理。ICANN 负责维护根域文件，该文件包含所有顶级域的列表及其对应的权威域名服务器地址。

根域名服务器是负责解析根域的域名服务器。它们是互联网基础设施的重要组成部分，因为所有域名解析都必须通过它们才能完成。目前有 13 台根域名服务器，遍布世界各地。

根域对于互联网的正常运行至关重要。如果没有根域，就无法将域名解析为 IP 地址，这将使互联网无法使用。
```

## 顶级域名

```
顶级域名（TLD）是互联网域名系统中最高级别的域名，位于根域之下。它就像一棵树的树枝，为二级域名提供支持。顶级域名通常由一个或两个字母组成，例如 ".com"、".org" 和 ".net"。

有三种主要类型的顶级域名：

通用顶级域名 (gTLD)：gTLD 是最常见的顶级域名类型，可供任何人注册。一些流行的 gTLD 包括 ".com"（用于商业网站）、".org"（用于非营利组织）和 ".net"（用于网络服务）。
国家/地区顶级域名 (ccTLD)：ccTLD 保留供特定国家或地区使用。例如，".us" 是美国的 ccTLD，".cn" 是中国的 ccTLD。
新通用顶级域名 (ngTLD)：ngTLD 是一类较新的顶级域名，于 2013 年开始推出。ngTLD 可以是更具描述性的，例如 ".shop" 或 ".info"，也可以针对特定社区，例如 ".nyc"（用于纽约市）或 ".xyz"。
要注册域名，您需要选择一个 TLD 并在注册商处注册域名。注册商是负责管理域名注册的组织。
```

## 二级域名

```
二级域名是指位于顶级域名（TLD）之下的域名部分。它是域名的第二部分，通常由一个或多个单词组成。用于标识网站或服务的特定部分。
二级域名可以由域名所有者自由创建和管理。但是，二级域名的长度不能超过 63 个字符，并且只能包含字母、数字、连字符和下划线。
```

# 原理

```xf
用户请求->本机->本地DNS->递归解析->授权域名服务器->本地DNS->用户计算机

当用户发起一个域名访问时，首先会检测本机DNS缓存，然后检测本地DNS服务器缓存，如果都没有结果，则进入到递归解析：根据主域名找到顶级域名，然后再到根域，根域返回顶级域名的IP，再返回主域名的IP，最终由授权域名服务器将IP返回给本地DNS，本地DNS将其缓存再返回给用户计算机，用户计算机得到IP后就可以使用该IP访问请求的网站或服务
```

# 域名访问流程

```
用户请求->DNS解析->建立连接->根据用户的请求协议和内容发送给服务器->服务器响应请求并返回请求内容->结束访问，断开连接

以一个网站正常访问为例：
用户对某一个网站发起http访问请求，首先是DNS解析查找到对应的服务器IP，然后用户与服务器建立TCP/IP连接，成功建立连接后，发起http请求，构建报文，多次发送，服务器接收请求，响应请求，并返回请求内容，浏览器接收到返回数据，进行渲染并展示给用户
```

# 部署DNS服务器

```
可直接使用bind-utils进行安装


```



# DNS工具

## dig

```
dig +trace www.xxx.com
```

## nslookup

```
nslookup [-option] [name | -] [server]
nslookup www.xxx.com
nslookup set type=cname www.baidu.com
```

